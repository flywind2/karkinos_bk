package jp.ac.utokyo.rcast.karkinos.cmd;

import java.io.IOException;

import jp.ac.utokyo.rcast.karkinos.annotationutils.AnnoverOutputJoin;
import jp.ac.utokyo.rcast.karkinos.exec.TumorGenotyper;
import jp.ac.utokyo.rcast.karkinos.exec.TumorGenotyperReanalysis;
import jp.ac.utokyo.rcast.karkinos.summary.SummaryStats;

public class KarkinosCmd {

	public static final String version = "Karkinos version 4.1.2 2013/10/22";

	public static void main(String[] arg) throws Exception {

		//
		// arg = new String[]{"analysis"};
		if (arg == null || arg.length == 0) {
			printMsg();
		} else {

			String cmd = arg[0];
			String[] arg2 = getArg(arg);
			if (cmd.equals("analysis")) {

				TumorGenotyper.main(arg2);

			} else if (cmd.equals("reanalysis")) {

				TumorGenotyperReanalysis.main(arg2);

			} else

			if (cmd.equals("mergeresult")) {

				AnnoverOutputJoin.main(arg2);

			} else if (cmd.equals("Summary")) {

				SummaryStats.main(arg2);
			
			} else if (cmd.equals("makeAveDepth")) {

				SummaryStats.main(arg2);

			} else {

				printMsg();
			}

		}

	}

	private static String[] getArg(String[] arg) {
		String[] arg2 = new String[arg.length - 1];
		for (int n = 1; n < arg.length; n++) {
			arg2[n - 1] = arg[n];
			// System.out.println(arg[n]);
		}
		return arg2;
	}

	private static void printMsg() {
		System.out.println(version);
		System.out.println("usage: karkinos.jar <command> options");
		System.out.println("Command: ");
		System.out
				.println("		 analysis	analysis SNV,CSV,tumor rate from bamfiles");
		System.out
				.println("		 reanalysis	reanalysis of SNV,CSV,tumorrate from middle pileuped file");
		System.out.println("		 mergeresult	merge Annover result into csv file");
		System.out.println("		 Summary	summary result across sample");
		System.out.println("		 makeAveDepth	make average depth file for normal");

	}

}
